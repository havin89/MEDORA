  const translations = {
  en: {
    siteName: "MEDORA",
    about: "About",
    welcome: "Welcome to MEDORA",
    doctorLogin: "Doctor Login",
    patientLogin: "Patient Login",
    doctorDashboardTitle: "Doctor Dashboard | HealthAlert",
    dashboardTitle: "AI Health Overview",
    dashboardSubtitle: "Monitor patients, detect risks, and make informed decisions with AI insights.",
    aboutTitle: "About | HealthAlert",
    backToMain: "Back to Main Page",
    login: "Login",
    chooseLogin: "Choose Login Type",
    patientIdPlaceholder: "e.g. P001",
    phonePlaceholder: "e.g. +905XXXXXXXXX",
    birthYearPlaceholder: "e.g. 1990",
    emailPlaceholder: "e.g. you@example.com",
    consentPlaceholder: "I consent to data usage",
    password: "Strong password",
    idTitle: "Institution ID",
    emailTitle: "Institutional Email",
    passwordTitle: "Password",
    institutionIdNum: "e.g. HOSP1234",
    // Label texts
    institutionIdLabel: "Institutional ID",
    doctorEmailLabel: "Institutional Email",
    doctorPasswordLabel: "Password",
    patientIdLabel: "Patient ID",
    phoneLabel: "Phone",
    birthYearLabel: "Birth Year",
    patientEmailLabel: "Email",
    patientPasswordLabel: "Password",
    consentLabel: "I consent to data usage.",
    searchPlaceholder: "Search patient by ID",
    criticalAlerts: "Critical Alerts",
    recommendations: "AI Recommendations",
    patientPageTitle: "Patient Dashboard | MEDORA",
    reportsTab: "Reports",
    patientDashboardTitle: "Your Personal Health Overview",
    patientDashboardSubtitle: "AI-powered insights, risk analysis, and personalized care — all in one place.",
    aiReportTitle: "AI Health Report",
    aiReportReadyTitle: "Your Health Report is Ready",
    aiReportReadyDesc: "Click the button below to generate your personalized AI health report based on your latest blood analysis.",
    generateMyReport: "Generate My Health Report",
    aiReportIntroNote: "This report uses advanced machine learning to analyze your blood test results",
    profileTitle: "My Medical Profile",
    appointments: "Appointments",
    appointmentsTitle: "Upcoming Appointments",
    aiTip: "Before your appointment, review your latest AI report and update your symptom log. Arrive 10 minutes early.",
    bookAppointment: "Book Appointment",
    backToMain: "Back to Main Page",
    alertsTitle: "Urgent Alerts",
    alertsDetailTitle: "Alerts Detail",
    tblCategory: "Category",
    tblFinding: "Finding",
    tblDetails: "Details",
    doctorActions: "Doctor Actions",
    aiMiniHint: "Run AI to interpret the latest labs and surface key risks.",
    approveReport: "Approve Report",
    requestTests: "Request Additional Tests",
    sendMessage: "Send Message to Patient",
    // Errors and messages
    errFixBefore: "Please fix errors before proceeding",
    errInvalidDoctor: "Invalid email or password. Try again.",
    errLoadDoctor: "Error loading doctor data.",
    errInvalidPatient: "Incorrect patient ID, email, password, phone or birth year.",
    errLoadPatient: "Error loading patient data.",
    patientNotFound: "Patient not found for ID",
    unauthorizedPatient: "You are not authorized to view this patient",
    errorLoadingPatient: "An error occurred while loading the patient",
    patientIdRequired: "Patient ID required",
    validEmailRequired: "Valid email required",
    passwordRequired: "Password required",
    enterValidPhone: "Enter valid phone",
    enterValidBirthYear: "Enter valid birth year",
    consentRequired: "You must consent",
    loginSuccessRedirecting: "Login successful! Redirecting...",
    institutionIdRequired: "Institutional ID required",
    enterValidInstitutionId: "Enter a valid Institutional ID",
    rec_htn_diet_title: "Reduce Salt; Consider DASH Diet",
    rec_htn_diet_body: "Keep daily sodium under 2g. Avoid processed foods; increase potassium-rich vegetables and whole grains.",
    rec_htn_activity_title: "Regular Aerobic Exercise",
    rec_htn_activity_body: "Aim for 150 minutes/week of moderate activity. Log blood pressure before and after exercise.",
    rec_dm_diet_title: "Carbohydrate Management",
    rec_dm_diet_body: "Limit simple sugars; increase fiber and plant protein. Distribute carbs evenly throughout the day.",
    rec_dm_monitor_title: "Glucose & HbA1c Monitoring",
    rec_dm_monitor_body: "Record home glucose readings. Check HbA1c every 3 months.",
    rec_chol_diet_title: "LDL-Lowering Diet",
    rec_chol_diet_body: "Reduce saturated/trans fats. Add olive oil, walnuts, omega-3s, and soluble fiber (oats).",
    rec_ob_weight_title: "Weight Management",
    rec_ob_weight_body: "Aim for 0.5–1 kg/week loss via calorie deficit. Daily walking, 7–8h sleep, good hydration.",
    rec_asth_env_title: "Avoid Triggers",
    rec_asth_env_body: "Avoid dust, smoke, strong perfumes; ventilate indoors.",
    rec_hd_med_title: "Medication Review",
    rec_hd_med_body: "Ibuprofen may raise cardiovascular risk; discuss safer alternatives with your doctor.",
    rec_hd_life_title: "Reduce Cardiovascular Risk",
    rec_hd_life_body: "Salt restriction, regular exercise, stress management, and smoking cessation.",
    compositeRiskNote: "Composite risk is calculated from age, chronic conditions, medication complexity, and abnormal lab parameters.",
    medications: "Medications",
    medicationsTitle: "Current Medications",
    badgeMonitoring: "Monitoring",
    badgeDiet: "Diet",
    badgeActivity: "Activity",
    badge_medication: "Medication",
    rec_htn_med_title: "Medication Review",
    rec_htn_life_title: "Lifestyle Modifications",
    yourActionPlan: "Your Action Plan",
    healthTips: "Health Tips",
    sendMessageTo: "Send Message to Doctor",
    confidence: "Confidence Level",
    all: "All",
    filter: "Filter",
    noNotificationsYet: "No notifications yet",
    send: "Send",
    rec_htn_med_body: "Take prescribed antihypertensives regularly. Monitor BP at home and report any side effects to your doctor.",
    rec_htn_life_body: "Reduce sodium intake, exercise regularly, limit alcohol, and manage stress for better blood pressure control.",
    composePlaceholder: "Compose your message...",
    followUp: "Follow-up Appointment",
    time: "Time",
    date: "Date",
    department: "Department",
    location: "Location",
    doctor: "Doctor",
    clinic: "Clinic",
    preview: "Preview",
    age: "Age",
    allergies: "Allergies",
    conditions: "Conditions",
    viewReports: "View Reports",
    type: "Type",
    suggestedMedication: "Suggested Medication",
    noNewMedication: "No new medication prescribed",
    detail: "Details",
    actions: "Actions",
    aiHealthReport: "AI Health Report",
    patientOverview: "Patient Overview",
    messageLabel: "Message",
    orderLab: "Order Lab Test",
    scheduleFollowup: "Schedule Follow-up",
    addDrugAllergy: "Add Drug Allergy",
    backToSearch: "Back",
    id: "ID",
    birthYear: "Birth Year",
    riskLevel: "Risk Level",
    abnormalParams: "Abnormal Parameters",
    patientInfo: "Patient Information",
    back: "Back",
    appointmentLabel: "Appointment",
    labLabel: "Lab Test",
    system: "System",
    labOrder: "Lab Order",
    name: "Name",
    panel: "Panel",
    discontinue: "Discontinue",
    rec_asth_plan_title: "Asthma Action Plan",
    rec_asth_plan_body: "Follow your asthma action plan regularly. Use your inhaler as prescribed and avoid known triggers.",
    rec_anem_title: "Anemia Management Plan",
    rec_anem_body: "Take iron supplements as prescribed and eat iron-rich foods like spinach and red meat.",
    rec_dm_monitor_title: "Diabetes Monitoring Plan",
    rec_dm_monitor_body: "Monitor blood glucose levels regularly, follow a diabetic diet, and take prescribed medications on time.",
    rec_asth_breath_title: "Asthma Breathing Exercise Plan",
    rec_asth_breath_body: "Practice deep breathing exercises daily, use your inhaler as prescribed, and avoid triggers like smoke and strong odors.",
    rec_anem_monitor_title: "Anemia Monitoring Plan",
    rec_anem_monitor_body: "Monitor hemoglobin levels regularly, take iron supplements as prescribed, and follow a diet rich in iron and vitamin C.",
    add: "Add",
    close: "Close",
    rec_dm_activity_title: "Activity Plan",
    rec_dm_activity_body: "Engage in regular physical activity, maintain a balanced diet, and monitor blood glucose levels consistently.",
    rec_dm_foot_title: "Foot Care Plan",
    rec_dm_foot_body: "Inspect your feet daily for cuts, sores, or swelling. Wear properly fitted shoes and keep feet clean and dry.",
    rec_chol_med_title: "Cholesterol Management Plan",
    rec_chol_med_body: "Follow a low-cholesterol diet, exercise regularly, and take prescribed medications as directed.",
    rec_chol_life_title: "Lifestyle Changes for Cholesterol",
    rec_chol_life_body: "Quit smoking, limit alcohol consumption, and manage stress levels to improve cholesterol levels.",
    rec_ob_diet_title: "Dietary Recommendations for Obesity",
    rec_ob_diet_body: "Follow a calorie-restricted diet, increase physical activity, and consider behavioral therapy for weight management.",
    rec_thyr_med_title: "Thyroid Medication Management Plan",
    rec_thyr_med_body: "Take levothyroxine on an empty stomach, at least 30-60 minutes before breakfast, and avoid calcium/iron supplements within 4 hours.",
    rec_thyr_monitor_title: "Thyroid Function Monitoring Plan",
    rec_thyr_monitor_body: "Regularly monitor TSH, T3, and T4 levels; adjust medication dosage as needed based on lab results and symptoms.",
    rec_thyr_life_title: "Lifestyle Recommendations for Thyroid Health",
    rec_thyr_life_body: "Maintain a balanced diet with adequate iodine intake, manage stress levels, and get regular exercise to support thyroid function.",
    rec_celiac_diet_title: "Dietary Recommendations for Celiac Disease",
    rec_celiac_diet_body: "Follow a strict gluten-free diet, avoid all sources of gluten, and consult with a dietitian for proper nutrition.",
    rec_celiac_nutri_title: "Nutritional Guidelines for Celiac Disease",
    rec_celiac_nutri_body: "Ensure adequate intake of vitamins and minerals, especially iron, calcium, and B vitamins, as deficiencies are common in celiac disease.",
    rec_celiac_support_title: "Support and Resources for Celiac Disease",
    rec_celiac_support_body: "Connect with celiac disease support groups, find gluten-free recipes, and access educational resources for managing your condition.",
    rec_general_title: "General Health Recommendations",
    rec_general_body: "Maintain a balanced diet, exercise regularly, get adequate sleep, and manage stress levels for overall well-being.",
  },
  
  tr: {
    siteName: "MEDORA",
    about: "Hakkında",
    welcome: "MEDORA'ya Hoş Geldiniz",
    doctorLogin: "Doktor Girişi",
    patientLogin: "Hasta Girişi",
    doctorDashboardTitle: "Doktor Paneli | MEDORA",
    dashboardTitle: "Yapay Zeka Sağlık Özeti",
    dashboardSubtitle: "Hastaları izleyin, riskleri tespit edin ve yapay zeka içgörüleriyle karar verin.",
    aboutTitle: "Hakkında | HealthAlert",
    backToMain: "Ana Sayfaya Dön",
    login: "Giriş Yap",
    chooseLogin: "Giriş Türü Seçin",
    patientIdPlaceholder: "ör. P001",
    phonePlaceholder: "ör. +905XXXXXXXXX",
    birthYearPlaceholder: "ör. 1990",
    emailPlaceholder: "ör. isim@örnek.com",
    consentPlaceholder: "Veri kullanımına izin veriyorum",
    password: "Güçlü şifre",
    institutionIdNum: "ör. HOSP1234",
    // Label texts
    institutionIdLabel: "Kurum ID",
    doctorEmailLabel: "Kurumsal E-posta",
    doctorPasswordLabel: "Şifre",
    patientIdLabel: "Hasta ID",
    phoneLabel: "Telefon",
    birthYearLabel: "Doğum Yılı",
    patientEmailLabel: "E-posta",
    patientPasswordLabel: "Şifre",
    consentLabel: "Veri kullanımına izin veriyorum.",
    searchPlaceholder: "Hasta ID ile ara",
    criticalAlerts: "Kritik Uyarılar",
    recommendations: "Yapay Zeka Önerileri",
    patientPageTitle: "Hasta Paneli | MEDORA",
    reportsTab: "Raporlar",
    patientDashboardTitle: "Kişisel Sağlık Özetiniz",
    patientDashboardSubtitle: "YZ destekli içgörüler, risk analizi ve kişiselleştirilmiş bakım — hepsi tek yerde.",
    aiReportTitle: "Yapay Zeka Sağlık Raporu",
    aiReportReadyTitle: "Sağlık Raporunuz Hazır",
    aiReportReadyDesc: "En güncel kan tahlilinize göre kişiselleştirilmiş YZ sağlık raporunuzu oluşturmak için aşağıdaki butona tıklayın.",
    generateMyReport: "Sağlık Raporumuzu Oluştur",
    aiReportIntroNote: "Bu rapor, kan tahlili sonuçlarınızı gelişmiş makine öğrenimi ile analiz eder",
    profileTitle: "Tıbbi Profilim",
    appointments: "Randevular",
    appointmentsTitle: "Yaklaşan Randevular",
    aiTip: "Randevunuzdan önce son YZ raporunuzu gözden geçirin ve semptom günlüğünüzü güncelleyin. 10 dakika erken gelin.",
    bookAppointment: "Randevu Al",
    backToMain: "Ana Sayfaya Dön",
    alertsTitle: "Acil Uyarılar",
    alertsDetailTitle: "Uyarı Detayı",
    tblCategory: "Kategori",
    tblFinding: "Bulgular",
    tblDetails: "Detaylar",
    doctorActions: "Doktor İşlemleri",
    searchBtn: "Ara",
    aiMiniHint: "Son tetkikleri YZ ile yorumlayın ve kritik riskleri öne çıkarın.",
    approveReport: "Raporu Onayla",
    requestTests: "Ek Test İste",
    sendMessage: "Hastaya Mesaj Gönder",
    // Errors and messages
    errFixBefore: "Lütfen hataları düzeltin",
    errInvalidDoctor: "E-posta veya şifre hatalı. Tekrar deneyin.",
    errLoadDoctor: "Doktor verisi yüklenemedi.",
    errInvalidPatient: "Hasta ID, e-posta, şifre, telefon veya doğum yılı hatalı.",
    errLoadPatient: "Hasta verisi yüklenemedi.",
    patientNotFound: "Bu ID için hasta bulunamadı",
    patientIdRequired: "Hasta ID gerekli",
    validEmailRequired: "Geçerli e-posta gerekli",
    passwordRequired: "Şifre gerekli",
    enterValidPhone: "Geçerli telefon girin",
    enterValidBirthYear: "Geçerli doğum yılı girin",
    consentRequired: "Onay vermelisiniz",
    loginSuccessRedirecting: "Giriş başarılı! Yönlendiriliyor...",
    institutionIdRequired: "Kurum ID gerekli",
    enterValidInstitutionId: "Geçerli Kurum ID girin",
    rec_htn_diet_title: "Tuzu Azalt; DASH Diyeti",
    rec_htn_diet_body: "Günlük sodyumu 2g altında tutun. İşlenmiş gıdalardan kaçının; potasyumdan zengin sebze ve tam tahılları artırın.",
    rec_htn_activity_title: "Düzenli Aerobik Egzersiz",
    rec_htn_activity_body: "Haftada 150 dk orta şiddette aktivite hedefleyin. Egzersiz öncesi/sonrası tansiyonu kaydedin.",
    rec_dm_diet_title: "Karbonhidrat Yönetimi",
    rec_dm_diet_body: "Basit şekerleri sınırlayın; lif ve bitkisel proteinleri artırın. Karbonhidratı güne eşit dağıtın.",
    rec_dm_monitor_title: "Glikoz ve HbA1c Takibi",
    rec_dm_monitor_body: "Evde glikoz ölçümlerini kaydedin. HbA1c’yi 3 ayda bir kontrol edin.",
    rec_chol_diet_title: "LDL Düşürücü Beslenme",
    rec_chol_diet_body: "Doymuş/trans yağları azaltın. Zeytinyağı, ceviz, omega-3 ve çözünebilir lif (yulaf) ekleyin.",
    rec_ob_weight_title: "Kilo Yönetimi",
    rec_ob_weight_body: "Haftada 0.5–1 kg kaybı hedefleyin. Günlük yürüyüş, 7–8 saat uyku, iyi hidrasyon.",
    rec_asth_env_title: "Tetikleyicilerden Kaçının",
    rec_asth_env_body: "Toz, duman, ağır parfümden uzak durun; iç ortamı havalandırın.",
    rec_hd_med_title: "İlaç Değerlendirmesi",
    rec_hd_med_body: "İbuprofen kardiyovasküler riski artırabilir; doktorunuzla daha güvenli alternatifleri değerlendirin.",
    rec_hd_life_title: "Kardiyovasküler Riski Azaltın",
    rec_hd_life_body: "Tuz kısıtlaması, düzenli egzersiz, stres yönetimi ve sigarayı bırakma.",
  }
};

  function setLanguage(lang) {
  localStorage.setItem("lang", lang); // Seçimi kaydet
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang][key]) {
      el.innerHTML = translations[lang][key];
    }
  });
  document.querySelectorAll("[data-i18n-placeholder]").forEach(el => {
    const key = el.getAttribute("data-i18n-placeholder");
    if (translations[lang][key]) {
      el.placeholder = translations[lang][key];
    }
  });


  // Dropdown'u güncelle
  const select = document.getElementById("langSelect");
  if (select) select.value = lang;
}

// Simple translator helper usable from other scripts
function t(key) {
  const lang = localStorage.getItem("lang") || "en";
  const dict = translations[lang] || translations.en;
  return (dict && dict[key]) || key;
}

document.addEventListener("DOMContentLoaded", () => {
  const select = document.getElementById("langSelect");
  let lang = localStorage.getItem("lang") || "en";
  setLanguage(lang);
  if (select) {
    select.value = lang;
    select.addEventListener("change", (e) => {
      setLanguage(e.target.value);
    });
  }
});
